ليه الـ Backend بتاعك بطيء؟ 5 حلول هتخليه أسرع 10X
واتحداك إنك ما تستخدمش الحيل دي بعد ما تعرفها ؟!

لو اشتغلت في أي مشروع كبير فأكيد واجهت المشكلة دي
الـ API بطيء السيرفر بيستهلك موارد أكتر من اللازم وقاعدة البيانات بتعاني مع كل استعلام والمصيبة المستخدمين مش فارق معاهم كل اللي يهمهم إن التطبيق يشتغل بأسرع شكل ممكن

أنا شخصيًا على مدار سنوات طويلة من الشغل وقعت في الفخ ده في أكتر من مشروع وكنت دايمًا بحاول ألاقي حلول تخلي الأداء أسرع بدون ما أحرق في السيرفرات أو أزود التكلفة 

وفي المقالات ده هشارك معاك أفضل التكنيكات اللي جربتها بنفسي واللي ممكن تاخد الـ Backend بتاعك لمستوى أعلى بكتير وهحاول ابسط الموضوع على أد ما اقدر علشان الكل يستفيد 

لو جاهز حضر فنجان القهوة الجميل بتاعك ويلا نبدأ المقال الأول 

حطها قاعدة في حياتك قواعد البيانات لو مش محسّنة بالقدر الكافي التطبيق كله ممكن ينهار مهما عملت 

في مرة كنت شغال على مشروع وكنا بنواجه مشكلة إن التقارير اللي بتعتمد على استعلامات قاعدة البيانات بتاخد وقت طويل جدًا في التحميل بعد شوية تحليل اكتشفنا إن الاستعلامات بتسحب بيانات أكتر من المطلوب Overfetching والفهارس Indexes مش متظبطة صح وده مخلي عمليات البحث أبطأ بكتير وكمان في Queries متكررة بدون أي داعي او احتياج حقيقي

الحل جربت التريكات دي وظبطت الدنيا الحمد لله فجرب ألي هقولك عليه وهتدعي لي 

١- استخدم الفهرسة الذكية Smart Indexing الفهارس مش مجرد حاجة إضافية دي ممكن تحوّل استعلام بياخد 10 ثواني لاستعلام بياخد 300ms بس جرب Composite Indexes لو عندك أكتر من عمود بيتم البحث عليهم مع بعض

٢- التخزين المؤقت Caching مش لازم كل استعلام يروح على قاعدة البيانات استخدم Redis أو Memcached لتخزين البيانات اللي بيتم استدعاؤها كتير ده لوحده قلل الحمل على الـ Database بنسبة تفوق 40% في مشروع من مشاريعي

٣- بدل ما تعمل استعلام لكل حاجة استخدم Materialized Views دي جداول بتحفظ البيانات الجاهزة بدل ما تعيد حسابها كل مرة لو عندك تقارير أو إحصائيات بتتكرر دي هتنقذك

وفي مشروع تاني لاحظت إن السيرفرات بتستخدم Memory عالية جدًا بدون سبب واضح ولما حللت الاستهلاك طلع السبب إن بعض العمليات بتحمّل البيانات بالكامل بدل ما تعمل Streaming وكل العمليات كانت بتتنفذ بشكل متزامن Synchronous فالسيرفر بيقف منتظر كل مهمة تخلص قبل ما يبدأ اللي بعدها

وربنا اكرمنا وحلينا المشكلة بشكل سريع عن طريق
استخدام Lazy Loading بدل ما تحمّل كل البيانات دفعة واحدة حمل اللي المستخدم محتاجه بس ده فرق معانا في استجابة بعض الـ APIs بنسبة عالية على ما أتذكر تجاوزت ٦٠%

ومن الحلول الاخري المعالجة غير المتزامنة Asynchronous Processing بدل ما تخلي كل حاجة تحصل في نفس اللحظة استخدم Queues زي RabbitMQ أو Kafka لتنفيذ العمليات في الخلفية بدون ما تعطل المستخدم
وتقليل حجم البيانات اللي بيتم تحميلها 
في مرة كنا بنرجّع بيانات JSON ضخمة جدًا في كل استجابة بعد ما حولناها لـ MessagePack بدل JSON حجم البيانات قل بنسبة ٧٠% وزمن الاستجابة اتحسن بفرق واضح جداً 

المشكلة الكبرى بطء الـ Backend وتأثيره على الأداء
الحل 1: تحسين استعلامات قاعدة البيانات
الحل 2: التخزين المؤقت – Caching
الحل 3: استخدام Materialized Views
الحل 4: التحميل الكسول – Lazy Loading
الحل 5: التحميل غير المتزامن – Async Processing

كلام جميل بس عندى كام كومنت صغير كده لان فى حاجات مش واضحه بالنسبالى

١/ زيادة مواردة السيرفر القرار دا بيتاخد بناء على ال traffic وعدد المستخدمين للتطبيق لانى مهما زودت الموارد فهوصل ل limited point والافضل فى الحاله دى انى اعمل horizontal scaling واعمل server replication ودا كمان هيكون اوفر فى ال cost بس لو ال traffic مش كتير فيكفينا ال vertical scaling زى ماانت عنلت 

٢/ استخدام ال message queues زى kfka or rabbitMQ وانك تحول جزء من البروسيس ك event driven دا معتمد على السيناريو اللى بيتم زى مثلا هل انا محتاج ان كل البروسيس تخلص علشان ابعت الريسبونس لليوزر ولا يكفى ان اول خطوه بس تخلص بنجاح والباقى اعمله فى الباك جروند 

********************

فى بعض الحلول كمان زى مثلا 

استخدم CDN فى ال static files زى الصور مثلا 

لو انا microservices مكن نوع الداتا بيز هيفرق معايا فى السرعه يعنى ممكن اخلى جزء معين من الداتا تتخزن فى not relationship DB زى momgoDB لو مافيش علاقات كتير بين الدات

